/* Basic reset */
* {
  box-sizing: border-box;
}
html,
body {
  margin: 0;
  padding: 0;
  height: 100%;
}
html {
  scroll-behavior: smooth;
}

body {
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial,
    sans-serif;

  /* --- Planet fly animations --- */
  color: #e2e8f0;
  background: radial-gradient(
      1200px 600px at 20% -10%,
      rgba(125, 211, 252, 0.12),
      transparent 60%
    ),
    radial-gradient(
      1000px 800px at 80% 10%,
      rgba(167, 139, 250, 0.1),
      transparent 60%
    ),
    #0b1020;
  background-repeat: no-repeat, no-repeat, no-repeat;
}

:root {
  --bg: #0b1020;
  --card: rgba(255, 255, 255, 0.06);
  --cardBorder: rgba(255, 255, 255, 0.12);
  --text: #e2e8f0;
  --muted: #94a3b8;
  --accent: #7dd3fc;
  --accent-2: #a78bfa;
  --good: #34d399;
  --warn: #f59e0b;
  /* Horizontal fly-out distance used by animations */
  --fly-dx: 220px;
}

/* Global starfield overlay */
.sky {
  position: fixed;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 0;
}
.sky .star {
  position: absolute;
  width: var(--sz, 2px);
  height: var(--sz, 2px);
  left: var(--x, 50%);
  top: var(--y, 50%);
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.98);
  opacity: var(--o, 0.75);
  box-shadow: 0 0 6px rgba(255, 255, 255, 0.6);
  transform: translate(0, 0) scale(1);
  will-change: opacity, transform;
  transition: transform 900ms cubic-bezier(0.2, 0.8, 0.2, 1),
    opacity var(--fade, 600ms) ease;
}
.sky .star::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  width: calc(var(--sz, 2px) * 3.2);
  height: calc(var(--sz, 2px) * 3.2);
  transform: translate(-50%, -50%);
  border-radius: 50%;
  background: radial-gradient(
    circle,
    rgba(255, 255, 255, 0.35) 0%,
    rgba(255, 255, 255, 0.12) 45%,
    rgba(255, 255, 255, 0) 70%
  );
  filter: blur(0.8px);
}
.sky .star.warp-out {
  transform: translate(
      calc(var(--vx, 0) * var(--dr, 160px)),
      calc(var(--vy, 0) * var(--dr, 160px))
    )
    scale(var(--scl, 2.4));
  opacity: 0;
}
.sky .star.warp-in-start {
  transform: translate(0, 0) scale(0);
  opacity: 0;
}
.sky .star.warp-in-big-start {
  transform: translate(0, 0) scale(var(--warp-in-big-scale, 5));
  opacity: 0;
}
.sky .star.warp-in {
  transform: translate(0, 0) scale(1);
  opacity: var(--o, 0.75);
}
/* Slower, smoother shrink for stars during backward return */
.sky .star.warp-back {
  transition: transform 1400ms cubic-bezier(0.2, 0.8, 0.2, 1),
    opacity 1000ms ease;
}
/* New stars on zoom-out move from edges to target position while scaling/fading */
.sky .star.warp-in-moving {
  transition: left 900ms cubic-bezier(0.2, 0.8, 0.2, 1),
    top 900ms cubic-bezier(0.2, 0.8, 0.2, 1),
    transform 900ms cubic-bezier(0.2, 0.8, 0.2, 1),
    opacity var(--fade, 600ms) ease;
}
/* Ensure app content paints above the global sky layer */
.app-header,
.container,
.app-footer {
  position: relative;
  z-index: 1;
}

.app-header {
  position: sticky;
  top: 0;
  z-index: 10;
  backdrop-filter: blur(8px);
  background: linear-gradient(
    180deg,
    rgba(11, 16, 32, 0.9),
    rgba(11, 16, 32, 0.6)
  );
  border-bottom: 1px solid var(--cardBorder);
  padding: 10px 16px;
  color: var(--text);
}
.app-header .header-inner {
  max-width: 1000px; /* match panels width */
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}
.header-left {
  display: flex;
  align-items: center;
  gap: 14px;
}
.branding {
  display: flex;
  align-items: center;
  gap: 10px;
}
.branding .logo {
  font-size: 28px;
}
.branding h1 {
  font-size: 20px;
  margin: 0;
  letter-spacing: 0.4px;
}

.header-actions {
  display: flex;
  align-items: center;
  gap: 10px;
}
.top-tabs {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  margin-left: 8px;
}
.tab-link {
  font-size: 13px;
  color: var(--muted);
  background: transparent;
  border: 1px solid transparent;
  padding: 6px 8px;
  border-radius: 8px;
  cursor: pointer;
  text-decoration: none;
}
.tab-link:hover {
  color: var(--text);
  border-color: var(--cardBorder);
  background: rgba(255, 255, 255, 0.04);
  text-decoration: none;
}
/* Brand link styling (no underline) */
.brand-link {
  color: var(--text);
  text-decoration: none;
}
.brand-link:hover,
.brand-link:focus {
  text-decoration: none;
}
.header-actions input[type="search"] {
  width: 220px;
  padding: 8px 10px;
  border-radius: 8px;
  border: 1px solid var(--cardBorder);
  background: rgba(255, 255, 255, 0.06);
  color: var(--text);
}
.header-actions input[type="search"]::-webkit-calendar-picker-indicator,
.header-actions input[type="search"]::-ms-clear,
.header-actions input[type="search"]::-webkit-search-cancel-button,
.header-actions input[type="search"]::-webkit-search-decoration {
  display: none;
}
.country-picker {
  position: relative;
}
.country-dropdown {
  position: absolute;
  left: 0;
  right: 0;
  top: calc(100% + 6px);
  max-height: 260px;
  overflow: auto;
  background: rgba(17, 24, 39, 0.96);
  border: 1px solid var(--cardBorder);
  border-radius: 10px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.35);
  padding: 6px 0;
  z-index: 20;
}
.country-dropdown.hidden {
  display: none;
}
.country-item {
  padding: 8px 12px;
  cursor: pointer;
  color: var(--text);
}
.country-item:hover,
.country-item[aria-selected="true"] {
  background: rgba(255, 255, 255, 0.08);
}
.location-inputs {
  display: flex;
  gap: 6px;
}
.location-inputs input {
  width: 110px;
  padding: 8px 10px;
  border-radius: 8px;
  border: 1px solid var(--cardBorder);
  background: rgba(255, 255, 255, 0.06);
  color: var(--text);
}

.btn {
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid var(--cardBorder);
  color: var(--text);
  background: rgba(255, 255, 255, 0.08);
  cursor: pointer;
}
.btn:hover {
  background: rgba(255, 255, 255, 0.14);
}
.btn-secondary {
  background: rgba(255, 255, 255, 0.04);
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 16px;
  color: var(--text);
}

.status {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  margin: 12px 0 16px;
}

.sun-summary {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 10px;
  margin: 8px 0 24px;
}
.sun-item {
  background: var(--card);
  border: 1px solid var(--cardBorder);
  border-radius: 12px;
  padding: 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.sun-item span {
  color: var(--muted);
  font-size: 12px;
}
.sun-item strong {
  font-size: 16px;
}
.sun-item span {
  color: var(--muted);
  font-size: 12px;
}
.sun-item strong {
  font-size: 16px;
}

.section-title {
  margin: 0 0 12px;
}
.cards {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 14px;
}
.card {
  background: var(--card);
  border: 1px solid var(--cardBorder);
  border-radius: 14px;
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  min-height: 140px;
}
.card .title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 700;
}
.card .title .emoji {
  font-size: 22px;
}
.card .meta {
  color: var(--muted);
  font-size: 12px;
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}
.card .times {
  margin-top: auto;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}
.badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 8px;
  border-radius: 8px;
  border: 1px solid var(--cardBorder);
}
.badge.ok {
  color: var(--good);
  font-size: 12px;
}

.app-footer {
  text-align: center;
  color: var(--muted);
  padding: 24px;
  border-top: 1px solid var(--cardBorder);
  background: rgba(255, 255, 255, 0.02);
}

/* Page sections (non-modal) */
.page-view {
  margin: 24px auto 0;
  max-width: 1000px;
  background: var(--card);
  border: 1px solid var(--cardBorder);
  border-radius: 12px;
}
.page-inner {
  padding: 18px 20px;
}
.tab-link.active {
  color: var(--text);
  border-color: var(--cardBorder);
  background: rgba(255, 255, 255, 0.06);
}

/* Scroll-target emphasis: brief scale + soft glow */
@keyframes sectionPulse {
  0% {
    transform: scale(0.985);
    box-shadow: 0 0 0 0 rgba(125, 211, 252, 0);
  }
  45% {
    transform: scale(1.02);
    box-shadow: 0 0 0 10px rgba(125, 211, 252, 0.14);
  }
  100% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(125, 211, 252, 0);
  }
}
.page-view.section-highlight {
  animation: sectionPulse 650ms cubic-bezier(0.2, 0.8, 0.2, 1);
}

/* Contact form */
.contact-form {
  display: grid;
  gap: 10px;
  margin-top: 10px;
}
.contact-form label {
  display: grid;
  gap: 6px;
}
.contact-form input,
.contact-form textarea {
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid var(--cardBorder);
  background: rgba(255, 255, 255, 0.06);
  color: var(--text);
}
.form-actions {
  display: flex;
  align-items: center;
  gap: 10px;
}
.form-status {
  color: var(--muted);
  font-size: 12px;
}

/* Solar system lineup */
.system-wrap {
  margin: 16px 0 64px; /* add bottom space so footer never collides */
  position: relative; /* create stacking context above global backgrounds */
  z-index: 1;
  /* Keep within container to preserve layout; rely on inner overflow visibility */
}
.system-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  color: var(--muted);
  margin-bottom: 8px;
}
.lead-hint {
  margin: 0 0 2px;
  color: var(--muted);
  font-size: clamp(13px, 1.6vw, 16px);
  text-align: center;
  width: 100%;
}
.sun-legend {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}
.sun-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #f59e0b; /* flat, no glow */
  box-shadow: none;
}
.hint {
  font-size: 12px;
}

.system {
  position: relative;
  border: none;
  background: transparent; /* panel invisible */
  border-radius: 0;
  padding: 0;
  overflow: visible;
  width: 100%; /* keep within container for stable centering */
  left: auto;
  transform: none;
  /* Restore generous height for a big system visual */
  min-height: clamp(560px, 62vh, 900px);
  perspective: 1200px;
}
.system .stars,
.system .streaks {
  position: absolute;
  inset: 0;
  pointer-events: none;
}
.system .stars {
  background-image: radial-gradient(
      1px 1px at 20% 30%,
      rgba(255, 255, 255, 0.6),
      transparent 60%
    ),
    radial-gradient(
      1px 1px at 70% 60%,
      rgba(255, 255, 255, 0.5),
      transparent 60%
    ),
    radial-gradient(
      1px 1px at 40% 80%,
      rgba(255, 255, 255, 0.45),
      transparent 60%
    ),
    radial-gradient(
      1px 1px at 85% 25%,
      rgba(255, 255, 255, 0.55),
      transparent 60%
    );
  opacity: 0.6;
  transform: translateZ(-120px) scale(1.4);
}
.system .streaks {
  display: none; /* disable vertical streak bars */
}
.system.zoomed .streaks {
  opacity: 1;
  animation: streak 650ms cubic-bezier(0.16, 0.84, 0.44, 1) forwards;
}
@keyframes streak {
  from {
    background: repeating-linear-gradient(
      90deg,
      rgba(255, 255, 255, 0) 0 12px,
      rgba(255, 255, 255, 0.05) 12px 18px
    );
    transform: translateX(0) translateZ(-80px);
  }
  to {
    background: repeating-linear-gradient(
      90deg,
      rgba(255, 255, 255, 0) 0 12px,
      rgba(255, 255, 255, 0.08) 12px 18px
    );
    transform: translateX(20px) translateZ(-80px);
  }
}

/* Fly-out motion: short horizontal move (~200px), rapid scale-up, no full screen travel */
@keyframes planetFlyLeftSmooth {
  0% {
    transform: translate(-50%, -50%) translateZ(-160px) scale(1);
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
  100% {
    transform: translate(calc(-50% - var(--fly-dx)), -50%) translateZ(-160px)
      scale(5);
    opacity: 0;
  }
}
@keyframes planetFlyRightSmooth {
  0% {
    transform: translate(-50%, -50%) translateZ(-160px) scale(1);
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
  100% {
    transform: translate(calc(-50% + var(--fly-dx)), -50%) translateZ(-160px)
      scale(5);
    opacity: 0;
  }
}
/* Fly-back with early fade-in and correct depth restoration */
@keyframes planetFlyBackLeftSmooth {
  0% {
    transform: translate(calc(-50% - var(--fly-dx)), -50%) translateZ(-160px)
      scale(5);
    opacity: 0;
  }
  20% {
    opacity: 0.2;
  }
  40% {
    opacity: 0.7;
  }
  100% {
    transform: translate(-50%, -50%) translateZ(var(--z, 0px)) scale(1);
    opacity: 1;
  }
}
@keyframes planetFlyBackRightSmooth {
  0% {
    transform: translate(calc(-50% + var(--fly-dx)), -50%) translateZ(-160px)
      scale(5);
    opacity: 0;
  }
  20% {
    opacity: 0.2;
  }
  40% {
    opacity: 0.7;
  }
  100% {
    transform: translate(-50%, -50%) translateZ(var(--z, 0px)) scale(1);
    opacity: 1;
  }
}
@keyframes sunFlyLeftSmooth {
  0% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
  100% {
    transform: translate(calc(-50% - var(--fly-dx)), -50%) scale(5);
    opacity: 0;
  }
}
@keyframes sunFlyRightSmooth {
  0% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
  100% {
    transform: translate(calc(-50% + var(--fly-dx)), -50%) scale(5);
    opacity: 0;
  }
}
/* Sun fly-back with early fade-in */
@keyframes sunFlyBackLeftSmooth {
  0% {
    transform: translate(calc(-50% - var(--fly-dx)), -50%) scale(5);
    opacity: 0;
  }
  20% {
    opacity: 0.2;
  }
  40% {
    opacity: 0.7;
  }
  100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
}
@keyframes sunFlyBackRightSmooth {
  0% {
    transform: translate(calc(-50% + var(--fly-dx)), -50%) scale(5);
    opacity: 0;
  }
  20% {
    opacity: 0.2;
  }
  40% {
    opacity: 0.7;
  }
  100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
}
.sun {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 128px;
  height: 128px;
  border-radius: 50%;
  background: none; /* texture will be applied via JS if provided */
  box-shadow: none; /* remove sun glow */
  z-index: 1; /* keep below orbits */
}
.orbits {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  transform-style: preserve-3d;
  overflow: visible; /* allow glow to extend beyond container */
  z-index: 2; /* render above sun */
}
.orbits::before {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  /* Size to outer ring with additional blur padding via + (blur*4) */
  /* Important: the blur expands beyond the ellipse; give extra horizontal padding
     so the glow isn't clipped at the left/right edges. If you still see a hard
     vertical cutoff, increase the multiplier below. */
  width: calc(
    var(--plane-d, 80%) * var(--plane-scale, 1) + (var(--plane-blur, 34px) * 5)
  );
  /* Keep vertical bleed much smaller so it doesn't reach panels */
  height: calc(
    var(--plane-d, 80%) * var(--plane-scale, 1) + (var(--plane-blur, 34px) * 3)
  );
  transform: translate(-50%, -50%) scaleY(var(--squeeze));
  background: radial-gradient(
    ellipse at center,
    rgba(255, 255, 255, calc(var(--plane-alpha, 0.045) * 0.85)) 0%,
    rgba(255, 255, 255, var(--plane-alpha, 0.045)) 28%,
    rgba(255, 255, 255, calc(var(--plane-alpha, 0.045) * 0.35)) 52%,
    rgba(255, 255, 255, calc(var(--plane-alpha, 0.045) * 0.12)) 74%,
    rgba(255, 255, 255, 0) 82%
  );
  /* Scale the gradient image itself down so the inner circle never touches
     the pseudo-element's edges; this is applied before the vertical ellipse
     squeeze. Tweak --plane-fill-scale (0.92..0.98) to taste. */
  background-repeat: no-repeat;
  background-position: center;
  background-size: calc(100% * var(--plane-fill-scale, 0.94))
    calc(100% * var(--plane-fill-scale, 0.94));
  filter: blur(var(--plane-blur, 34px));
  /* Fade the bottom of the glow to transparent before panels */
  -webkit-mask-image: linear-gradient(
    to bottom,
    #000 0%,
    #000 62%,
    rgba(0, 0, 0, 0) 86%
  );
  mask-image: linear-gradient(
    to bottom,
    #000 0%,
    #000 62%,
    rgba(0, 0, 0, 0) 86%
  );
  will-change: transform, filter;
  pointer-events: none;
}

.orbit-ring {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) scaleY(var(--squeeze))
    translateZ(var(--ring-z, 0px));
  border: 1px dashed rgba(255, 255, 255, 0.18);
  border-radius: 50%;
  pointer-events: none;
  opacity: 1;
  transition: opacity 420ms cubic-bezier(0.2, 0.8, 0.2, 1);
}
/* When zoomed (a planet is selected), fade out the orbit lines */
.system.zoomed .orbit-ring {
  opacity: 0;
}
.orbit-holder {
  position: absolute;
  transform-style: preserve-3d;
}
.orbit-planet {
  position: absolute;
  transform: translate(-50%, -50%) translateZ(var(--z, 0px));
  display: grid;
  place-items: center;
  cursor: pointer;
  color: var(--text);
  transition: left 800ms cubic-bezier(0.2, 0.8, 0.2, 1),
    top 800ms cubic-bezier(0.2, 0.8, 0.2, 1),
    transform 1400ms cubic-bezier(0.2, 0.8, 0.2, 1), opacity 700ms ease;
  transform-origin: center center;
}
.orbit-planet .dot {
  /* Square images with no rounding */
  border-radius: 0;
  box-shadow: none; /* remove ring/glow */
  background-color: transparent;
  border: 0;
  outline: none;
  position: relative;
  transform-origin: center center;
  transition: transform 1400ms cubic-bezier(0.2, 0.8, 0.2, 1);
}
.orbit-planet .label {
  position: absolute;
  top: -28px;
  color: var(--muted);
  font-size: clamp(13px, 1.8vw, 16px);
  white-space: nowrap;
  transform: none;
  opacity: 0;
  transition: opacity 160ms ease;
}
.orbit-planet:hover .label,
.orbit-planet.selected .label {
  opacity: 1;
}

.orbit-planet:hover {
  transform: translate(-50%, -50%) translateZ(calc(var(--z, 0px) + 8px))
    scale(1.06);
}
.orbit-planet.selected {
  z-index: 3;
  transform: translate(-50%, -50%) translateZ(calc(var(--z, 0px) + 160px));
  /* no extra brightness to avoid edge halos */
}
.orbit-planet.selected .dot {
  transform: scale(
    var(--sel-scale, 3)
  ); /* per-planet computed in JS for equal final size */
}
.orbit-planet.selected .label {
  color: var(--text);
  font-weight: 800;
  font-size: clamp(16px, 2.2vw, 22px);
  /* place the label above the scaled planet: half of selected diameter + gap */
  top: calc(-1 * ((var(--sel-scale, 3) * var(--dot, 40px)) / 2 + 28px));
  text-shadow: 0 2px 6px rgba(0, 0, 0, 0.35);
}

.system.zoomed .orbits {
  transition: transform 420ms cubic-bezier(0.16, 0.84, 0.44, 1);
}
.system[data-center-x] .orbits {
  transform: translateX(var(--center-pan, 0));
}

.orbit-planet.fly-left {
  pointer-events: none;
  will-change: transform, opacity;
  animation: planetFlyLeftSmooth 1000ms cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
}
.orbit-planet.fly-right {
  pointer-events: none;
  will-change: transform, opacity;
  animation: planetFlyRightSmooth 1000ms cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
}

/* Reverse fly-in (play the same keyframes backwards) */
.orbit-planet.fly-back-left {
  will-change: transform, opacity;
  animation: planetFlyBackLeftSmooth 1000ms cubic-bezier(0.2, 0.8, 0.2, 1)
    forwards;
}
.orbit-planet.fly-back-right {
  will-change: transform, opacity;
  animation: planetFlyBackRightSmooth 1000ms cubic-bezier(0.2, 0.8, 0.2, 1)
    forwards;
}

/* Sun fly-out animations to match planets */
.sun {
  transition: transform 1000ms cubic-bezier(0.2, 0.8, 0.2, 1),
    opacity 600ms ease;
}
.sun.fly-left {
  will-change: transform, opacity;
  animation: sunFlyLeftSmooth 1000ms cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
}
.sun.fly-right {
  will-change: transform, opacity;
  animation: sunFlyRightSmooth 1000ms cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
}

.sun.fly-back-left {
  will-change: transform, opacity;
  animation: sunFlyBackLeftSmooth 1000ms cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
}
.sun.fly-back-right {
  will-change: transform, opacity;
  animation: sunFlyBackRightSmooth 1000ms cubic-bezier(0.2, 0.8, 0.2, 1)
    forwards;
}

.system .planets {
  position: absolute;
  left: 80px;
  right: 16px;
  top: 50%;
  transform: translateY(-50%) rotateX(10deg);
  transform-origin: left center;
  transform-style: preserve-3d;
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: minmax(64px, 1fr);
  align-items: center;
  gap: 16px;
}
.planet {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--text);
  cursor: pointer;
  user-select: none;
  transition: transform 360ms cubic-bezier(0.2, 0.8, 0.2, 1), opacity 300ms ease,
    filter 240ms ease;
  transform-style: preserve-3d;
}
.planet .dot {
  border-radius: 0;
  box-shadow: none;
}
.planet .label {
  position: absolute;
  top: -42px;
  font-size: 12px;
  color: var(--muted);
  text-align: center;
  white-space: nowrap;
  transform: translateZ(20px);
}
.planet:hover {
  transform: translateZ(6px) scale(1.06);
  filter: brightness(1.1);
}

/* Warp zoom selected + camera pan to center selected planet */
.planet.selected {
  z-index: 3;
  transform: translateZ(120px) scale(1.8);
  filter: brightness(1.15);
}
.planet.selected .label {
  color: var(--text);
  font-weight: 700;
}
.system.zoomed .planets {
  transition: transform 420ms cubic-bezier(0.16, 0.84, 0.44, 1);
}
.system[data-center-x] .planets {
  transform: translateY(-50%) rotateX(10deg) translateX(var(--center-pan, 0));
}

/* Fly-out others based on side */
.planet.fly-left {
  transform: translateX(-60vw) translateZ(-120px) scale(0.85);
  opacity: 0;
  pointer-events: none;
}
.planet.fly-right {
  transform: translateX(60vw) translateZ(-120px) scale(0.85);
  opacity: 0;
  pointer-events: none;
}

/* External detail dock */
.detail-dock {
  margin: 14px 2px 0;
  padding: 14px 16px;
  border-radius: 14px;
  border: 1px solid var(--cardBorder);
  background: rgba(255, 255, 255, 0.04);
  color: var(--text);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  min-height: 58px;
}
.detail-dock.hidden {
  display: none;
}
/* Info block under the system (not overlayed) */
.info-overlay {
  margin: -140px auto 0; /* pull up close to the system (nearly no gap) */
  text-align: center;
  color: var(--text);
  max-width: 900px;
  pointer-events: auto;
  position: relative; /* for close button anchoring */
}
.info-overlay.hidden {
  display: none; /* redundant with 'Next [planet]...' line */
}
.info-sub {
  margin-top: 2px;
  font-size: clamp(19px, 2.4vw, 30px);
  color: var(--muted);
}
.info-time {
  margin-top: 4px;
  font-size: clamp(19px, 4.5vw, 48px);
  font-weight: 800;
  letter-spacing: 1px;
}
.info-place {
  margin-top: 6px;
  font-size: clamp(18px, 2.1vw, 24px);
  color: var(--muted);
}

@media (max-width: 640px) {
  .info-overlay {
    margin: -64px auto 0;
  } /* safer on small screens */
}
.detail-dock .title {
  font-weight: 700;
  font-size: 16px;
}
.detail-dock .text {
  color: var(--muted);
}
.detail-dock .actions {
  display: flex;
  gap: 8px;
}
.detail-dock .back {
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid var(--cardBorder);
  color: var(--text);
  padding: 8px 12px;
  border-radius: 8px;
  cursor: pointer;
}

/* Detail overlay */
.detail {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
  transition: opacity 250ms ease;
}
.detail.hidden {
  opacity: 0;
  pointer-events: none;
}
.info-close {
  display: none;
}
/* Responsive */
@media (max-width: 900px) {
  .cards {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}
@media (max-width: 640px) {
  .status {
    grid-template-columns: 1fr;
  }
  .sun-summary {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
  .cards {
    grid-template-columns: 1fr;
    background: none; /* texture will be applied via JS if provided */
    box-shadow: none; /* remove sun glow */
  }
  .location-inputs input {
    width: 100px;
  }
}

/* Panels under the time strip */
#panels {
  margin: 24px auto 0;
  max-width: 1000px;
  display: grid;
  gap: 16px;
  position: relative;
  z-index: 5;
}
.panel {
  border: 1px solid var(--cardBorder);
  border-radius: 12px;
  background: var(--card);
  overflow: hidden;
}
.panel#panel-next .panel-body {
  text-align: center;
}
.panel-title {
  margin: 0;
  padding: 16px 18px;
  font-size: 16px;
  font-weight: 700;
  color: var(--text);
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  text-align: center;
}
.panel-body {
  padding: 18px 20px;
  color: var(--muted);
  display: none;
  line-height: 1.6;
}
.panel-always .panel-body {
  display: block;
  text-align: left;
}
.panel-placeholder {
  padding: 16px 18px;
  color: var(--muted);
  text-align: center;
}
/* Show placeholders when no selection; hide bodies */
#panels .panel.panel-requires-selection .panel-placeholder {
  display: block;
}
#panels .panel.panel-requires-selection .panel-body {
  display: none;
}
/* When a planet is selected (overlay visible), show bodies and hide placeholders */
#infoOverlay:not(.hidden)
  ~ #panels
  .panel.panel-requires-selection
  .panel-body {
  display: block;
}
#infoOverlay:not(.hidden)
  ~ #panels
  .panel.panel-requires-selection
  .panel-placeholder {
  display: none;
}

/* Timeline styles */
.timeline {
  list-style: none;
  margin: 0;
  padding: 0;
}
.timeline li {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 4px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}
.timeline li:last-child {
  border-bottom: none;
}
.tl-label {
  color: #cbd5e1;
}
.tl-value {
  color: #e2e8f0;
  font-weight: 600;
}
